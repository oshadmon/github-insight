# github-insight
The following repository is intended to generate graphs from GitHub data 

# Files & Sample code
```create_table.sql``` - SQL file containing  CREATE table statements for github specific tables 

```generate_github_data.py``` - Connect to Github, and retrieve insight regarding traffic, commit counts, clones count, and information regarding where visitors are coming from. 

```
ubuntu@ori-foglamp:~/github-insight$ python3 generate_github_data.py --help 
usage: generate_github_data.py [-h] [-d DIR] auth_file

positional arguments:
  auth_file          authentication file

optional arguments:
  -h, --help         show this help message and exit
  -d DIR, --dir DIR  directory to send data into (for JSON)

ubuntu@ori-foglamp:~/github-insight$ python3 generate_github_data.py $HOME/auth_pair.txt -d /tmp
ubuntu@ori-foglamp:~/github-insight$ cat /tmp/2018_09_04_11_14_58_FogLAMP_data.json 
{"key": "c4cf0fff-6e8a-44c4-bca7-3987d7fabf78", "readings": {"traffic": 7}, "asset": "github/FogLAMP/traffic", "timestamp": "2018-08-21 00:00:00"}
{"key": "ab7c1497-a79c-4782-a5ce-baee08f530f1", "readings": {"commits": 16}, "asset": "github/FogLAMP/commits", "timestamp": "2018-09-04"}
{"key": "eae6cde8-8f02-49ec-87c0-310cab35b7d7", "readings": {"clones": 8}, "asset": "github/FogLAMP/clones", "timestamp": "2018-08-22T00:00:00Z"}
{"key": "61363499-5efa-4bf2-94f2-3c2c23f55259", "readings": {"total": 343, "count": 30}, "asset": "github/FogLAMP/referrerals/github.com", "timestamp": "2018-09-04"}
...
```

```send_data.py``` - Given output file (generated by ```generate_github_data.py```) store results in corresponding tables in database. 

```
ubuntu@ori-foglamp:~/github-insight$ python3 send_data.py --help
usage: send_data.py [-h] [-up UP] [-hp HP] [-db DB] [-create CREATE] file_name

positional arguments:
  file_name             file with data from github

optional arguments:
  -h, --help            show this help message and exit
  -up UP, --up UP       user & password for database
  -hp HP, --hp HP       host & port for database
  -db DB, --db DB       database name for database
  -create CREATE, --create CREATE
                        SQL file with create tables
ubuntu@ori-foglamp:~/github-insight$ python3 send_data.py /tmp/2018_09_04_11_14_58_FogLAMP_data.json -up ubuntu:foglamp -hp 127.0.0.1:5432 -db github
github=# SELECT * FROM github_clones limit 5; 
                row_id                | timestamp  |  repo   | clones | total 
--------------------------------------+------------+---------+--------+-------
 4d0ca486-cf6d-4297-b0eb-b0ffe83b6f0e | 2018-08-30 | FogLAMP |      6 |   191
 3417c56e-f9f8-4247-b234-bae127085904 | 2018-08-31 | FogLAMP |      5 |   196
 b9c8fa39-31dc-45ec-825d-f18425985845 | 2018-09-01 | FogLAMP |      5 |   201
 0827f695-f635-49b1-9ecf-8b106f75de6b | 2018-09-02 | FogLAMP |      4 |   205
 23d95f84-c294-44ed-9f27-20bd19d1a99f | 2018-09-03 | FogLAMP |      6 |   211
...

github=# SELECT * FROM github_commits limit 5; 
                row_id                | timestamp  |  repo   | commits | total 
--------------------------------------+------------+---------+---------+-------
 7ffd1ffb-6be0-4c8b-8fab-e49217f05259 | 2018-08-25 | FogLAMP |       1 |     1
 8c57095a-28d4-4189-b881-8d6c02860ba2 | 2018-08-24 | FogLAMP |      10 |    11
 02bfa06b-3c84-460a-90ec-5aad702d04ab | 2018-08-28 | FogLAMP |       3 |    14
 cefad1b4-c70d-4407-974b-407a9d500165 | 2018-08-29 | FogLAMP |       7 |    21
 ba50135f-17b6-42b4-b635-1796eec02df8 | 2018-08-27 | FogLAMP |       9 |    30
...
github=# SELECT * FROM github_referrals limit 5; 
                row_id                | timestamp  |  repo   |        referral        | today | total 
--------------------------------------+------------+---------+------------------------+-------+-------
 634d180d-da51-43fb-ad4c-16bcc481f28c | 2018-08-31 | FogLAMP | github.com             |    27 |   574
 4e3c2264-28d6-44c8-96b2-5d4da03277c0 | 2018-08-31 | FogLAMP | scaledb.atlassian.net  |     7 |    47
 80ec4ded-59a8-4235-8f5c-85ef5c097f69 | 2018-08-31 | FogLAMP | Google                 |    14 |    43
 daa18905-f34f-41f3-9011-8c6f36605187 | 2018-08-31 | FogLAMP | dianomic.com           |     7 |    19
 50af7713-3971-4ba8-865e-932ec274edb0 | 2018-08-31 | FogLAMP | foglamp.readthedocs.io |     2 |     2
... 
github=# SELECT * FROM github_traffic limit 5; 
                row_id                | timestamp  |  repo   | traffic | total 
--------------------------------------+------------+---------+---------+-------
 c1abce1a-6c81-4a74-95ef-04de1c53439b | 2018-08-17 | FogLAMP |      16 |    16
 cf674d4d-8b61-4f38-9efb-16f50986bae7 | 2018-08-18 | FogLAMP |       5 |    21
 ffdde199-c6de-408d-b098-7edab403080f | 2018-08-19 | FogLAMP |       5 |    26
 6f95af3f-9188-44af-8739-e1c3f8730f17 | 2018-08-20 | FogLAMP |      17 |    43
 e4429623-113a-421a-a912-dded91531b46 | 2018-08-21 | FogLAMP |      20 |    63
... 
```

# Notes 

Please use [Graphing](https://github.com/oshadmon/Graphing) to graph the data in the different tables. 
