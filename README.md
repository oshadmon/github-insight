# github-insight

The following repository is intended to generate tables with traffic related insight from GitHub. 
Due to the limitation that GitHub doesn't provide IP addresses the daily result (ie `today`) is unique counts for that day. 

# Files & Sample code

```create_table.sql``` - SQL file containing  CREATE table statements for github specific tables 

```auth_pair.txt``` - Text file containing information that helps connect to a given GitHub repo & retrieve information  
 
```generate_github_data.py``` - Connect to Github, and retrieve insight regarding traffic, commit counts, clones count, and information regarding where visitors are coming from. 

```
ubuntu@ori-foglamp:~/github-insight$ python3 generate_github_data.py --help 
usage: generate_github_data.py [-h] [-d DIR] auth_file

positional arguments:
  auth_file          authentication file

optional arguments:
  -h, --help         show this help message and exit
  -d DIR, --dir DIR  directory to send data into (for JSON)

ubuntu@ori-foglamp:~/github-insight$ python3 generate_github_data.py $HOME/auth_pair.txt -d /tmp
ubuntu@ori-foglamp:~/github-insight$ cat /tmp/2018_09_04_11_14_58_FogLAMP_data.json 
{"key": "c4cf0fff-6e8a-44c4-bca7-3987d7fabf78", "readings": {"traffic": 7}, "asset": "github/FogLAMP/traffic", "timestamp": "2018-08-21 00:00:00"}
{"key": "ab7c1497-a79c-4782-a5ce-baee08f530f1", "readings": {"commits": 16}, "asset": "github/FogLAMP/commits", "timestamp": "2018-09-04"}
{"key": "eae6cde8-8f02-49ec-87c0-310cab35b7d7", "readings": {"clones": 8}, "asset": "github/FogLAMP/clones", "timestamp": "2018-08-22T00:00:00Z"}
{"key": "61363499-5efa-4bf2-94f2-3c2c23f55259", "readings": {"count": 30}, "asset": "github/FogLAMP/referrerals/github.com", "timestamp": "2018-09-04"}
...
```

```send_data.py``` - Given output file (generated by ```generate_github_data.py```) store results in corresponding tables in database. 

```
ubuntu@ori-foglamp:~/github-insight$ python3 send_data.py --help
usage: send_data.py [-h] [-up UP] [-hp HP] [-db DB] [-create CREATE] file_name

positional arguments:
  file_name             file with data from github

optional arguments:
  -h, --help            show this help message and exit
  -up UP, --up UP       user & password for database
  -hp HP, --hp HP       host & port for database
  -db DB, --db DB       database name for database
  -create CREATE, --create CREATE
                        SQL file with create tables
ubuntu@ori-foglamp:~/github-insight$ python3 send_data.py /tmp/2018_09_04_11_14_58_FogLAMP_data.json -up ubuntu:foglamp -hp 127.0.0.1:5432 -db github
```

# Notes 

Please use [Graphing](https://github.com/oshadmon/Graphing) to graph the data in the different tables. 
